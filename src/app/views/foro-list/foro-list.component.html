<div class="container-fluid">
  <div class="container-foro">
    <header class="transparent-header">
      <div class="header-left">
        <app-menu></app-menu>
        <div class="image-container">
          <img src="/assets/logo5.png" alt="Logo Foro" class="logo">
          <div class="overlay-text">
            Foro
          </div>
        </div>
      </div>
      <div class="header-right">
        <i class="fi fi-sr-circle-user user-icon"></i> 
      </div>
    </header>

    <div class="foro-container">
      <div class="search-bar">
        <input type="text" class="form-control" [(ngModel)]="searchTerm" (input)="filterPosts()" placeholder="Buscar...">
        <i class="fas fa-search search-icon"></i>
      </div>

      <div class="fondo-container">
        <!-- Botón para añadir entrada, activa toggleModal -->
        <button class="btnAdd" (click)="toggleModal()">Añadir entrada</button>

        <!-- Modal -->
        <div class="modal fade" tabindex="-1" *ngIf="showModal" [ngClass]="{'show': showModal}" style="display: block;">
          <!-- Backdrop -->
          <div class="modal-backdrop" *ngIf="showModal"></div>
        
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <!-- Encabezado del Modal -->
              <div class="modal-header" style="background-color: #448615; color: white; border-radius: 10px 10px 0 0;">
                <h5 class="modal-title">Añadir nueva entrada</h5>
                <button type="button" class="btn-close" (click)="toggleModal()" style="color: white;"></button>
              </div>
              
              <!-- Cuerpo del Modal -->
              <div class="modal-body" style="background-color: #ffffff;">
                <form #postForm="ngForm" (ngSubmit)="submitPost(postForm.value)">
                  <!-- Campo de Título -->
                  <div class="mb-3">
                    <label for="titulo" class="form-label" style="color: #000000;">Título:</label>
                    <input type="text" id="titulo" name="titulo" class="form-control" ngModel required>
                  </div>
                  
                  <!-- Campo de Descripción -->
                  <div class="mb-3">
                    <label for="descripcion" class="form-label" style="color: #000000;">Descripción:</label>
                    <textarea id="descripcion" name="descripcion" class="form-control" ngModel required></textarea>
                  </div>
                  
                  <!-- Botones de Acción -->
                  <div class="d-flex justify-content-between">
                    <button type="submit" class="btnAdd" [disabled]="!postForm.valid">Guardar</button>
                    <button type="button" class="btn btn-primary" (click)="toggleModal()">Cancelar</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        
<!-- Publicaciones -->
<div *ngFor="let publicacion of filteredPublicaciones" class="card mb-3">
  <div class="card-content p-3">
    <div class="user-title-info">
      <i class="fas fa-user user-icon"></i>
      <div class="title-meta">
        <h4>{{ publicacion.titulo }}</h4>
        <p class="publication-meta text-muted">
          Publicado el {{ publicacion.fecha }}
        </p>
        
      </div>
    </div>
    <div class="description">
      <p class="description-text">{{ publicacion.descripcion }}</p>
    </div>
    <a [routerLink]="['/foro', publicacion.id]" class="btn btn-primary">Ver discusión</a>
  </div>
</div>

        <!-- Paginación -->
        <div class="pagination-container">
          <button (click)="changePage(1)" [disabled]="currentPage <= 1" class="btn btn-secondary">Primera</button>
          <button (click)="changePage(currentPage - 1)" [disabled]="currentPage <= 1" class="btn btn-secondary">Anterior</button>
          <span> Página {{ currentPage }} de {{ totalPages }} </span>
          <button (click)="changePage(currentPage + 1)" [disabled]="currentPage >= totalPages" class="btn btn-secondary">Siguiente</button>
          <button (click)="changePage(totalPages)" [disabled]="currentPage >= totalPages" class="btn btn-secondary">Última</button>
        </div>
        
        
      </div>
    </div>
  </div>
</div>
